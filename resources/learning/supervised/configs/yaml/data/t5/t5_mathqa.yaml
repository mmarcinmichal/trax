defaults:
  - /data/base
  - /data/t5/mathqa_base
  - _self_

data:
  Tokenize:
    _target_: "trax.data.Tokenize"
    keys:
      - 0
      - 1
    vocab_file: "en_32k.subword"
  make_additional_stream:
    _target_: "trax.data.make_additional_stream"
    stream:
      - "${data.eval_additional_task.CreateMathQAInputs}"
      - "${data.Tokenize}"
      - "${data.Shuffle}"
      - "${data.PadToLength}"
      - "${data.TruncateToLength}"
      - "${data.Batch}"
  train:
    CreateMathQAInputs:
      _target_: "trax.data.CreateMathQAInputs"
      dataset_path: "path_to_the_dataset"
      train: true
      tolerance: 0.01
      cumulative: true
  eval:
    CreateMathQAInputs:
      _target_: "trax.data.CreateMathQAInputs"
      dataset_path: "path_to_the_dataset"
      train: false
      tolerance: 0.01
      cumulative: true
  eval_additional_task:
    CreateMathQAInputs:
      _target_: "trax.data.CreateMathQAInputs"
      dataset_path: "path_to_the_dataset"
      train: false
      tolerance: 0.01
      cumulative: false
  PadToLength:
    _target_: "trax.data.PadToLength"
    len_map:
      0: 512
      1: 512
      2: 512
    pad_value:
      0: 0
      1: 0
      2: 0
  TruncateToLength:
    _target_: "trax.data.TruncateToLength"
    len_map:
      0: "(256,)"
      1: "(256,)"
      2: "(256,)"
  Batch:
    _target_: "trax.data.Batch"
    batch_size: 4

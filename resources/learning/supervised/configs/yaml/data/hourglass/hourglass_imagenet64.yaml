defaults:
  - /data/base
  - _self_

data:
  make_streams:
    _target_: "trax.data.make_streams"
    _partial_: true
    train_stream:
      - "${data.train.TFDS}"
      - "${data.DownsampledImagenetFlatten}"
      - "${data.DictToTupleImage}"
      - "${data.Shuffle}"
      - "${data.BatchTrain}"
      - "${data.AddLossWeights}"
    eval_stream:
      - "${data.eval.TFDS}"
      - "${data.DownsampledImagenetFlatten}"
      - "${data.DictToTupleImage}"
      - "${data.Shuffle}"
      - "${data.BatchEval}"
      - "${data.AddLossWeights}"
  train:
    TFDS:
      _target_: "trax.data.TFDS"
      dataset_name: "downsampled_imagenet/64x64"
      data_dir: null
      train: true
  eval:
    TFDS:
      _target_: "trax.data.TFDS"
      dataset_name: "downsampled_imagenet/64x64"
      data_dir: null
      train: false
  DictToTupleImage:
    _target_: "trax.data.DictToTuple"
    keys:
      - "image"
      - "image"
  Shuffle:
    _target_: "trax.data.Shuffle"
    queue_size: 1024
  BatchTrain:
    _target_: "trax.data.Batch"
    batch_size: 1
  BatchEval:
    _target_: "trax.data.Batch"
    batch_size: 8
  AddLossWeights:
    _target_: "trax.data.add_loss_weights"
    _partial_: true
  DownsampledImagenetFlatten:
    _target_: "trax.data.DownsampledImagenetFlatten"
